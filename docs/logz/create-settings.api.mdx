---
id: create-settings
title: "Set up archiving"
description: "Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html). Please ensure to change the region in the URL to match your account's region."
sidebar_label: "Set up archiving"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/logz/logz-io-api
custom_edit_url: null
hide_send_button: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Set up archiving</h1>

<MethodEndpoint method={"post"} path={"/v2/archive/settings"}></MethodEndpoint>



Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html). Please ensure to change the region in the URL to match your account's region.

## Request

<MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"storageType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`S3`, `BLOB`]"} schema={{"type":"string","enum":["S3","BLOB"],"description":"Specifies the storage provider. If `S3`, the   `amazonS3StorageSettings` are relevant. If `BLOB`, the `azureBlobStorageSettings` are relevant.","example":"S3"}}></SchemaItem><SchemaItem collapsible={false} name={"enabled"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, archiving is currently enabled.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={false} name={"compressed"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, logs are compressed before they are archived.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>amazonS3StorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `S3`.

</div><SchemaItem collapsible={false} name={"credentialsType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`IAM`, `KEYS`]"} schema={{"description":"Specifies which credentials will be used for authentication. The options are either `KEYS` with `s3SecretCredentials`, or `IAM` with `s3IamCredentials`.","type":"string","enum":["IAM","KEYS"]}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Specify a path to the **root** of the S3 bucket. (Currently, archiving to a sub-bucket is supported, but not restoring from one.)\n**Unique buckets** - It is important to archive each account/sub-account to a separate S3 bucket."}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3SecretCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Authentication with S3 Secret Credentials is supported for backward compatibility. IAM roles are strongly recommended.

</div><SchemaItem collapsible={false} name={"accessKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"secretKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3IamCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"arn"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Amazon Resource Name (ARN) to uniquely identify the S3 bucket."}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>azureBlobStorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `Blob`.

</div><SchemaItem collapsible={false} name={"tenantId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Directory (tenant) ID. The Tenant ID of the AD app. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure application (client) ID. The Client ID of the AD app, found under the App Overview page. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientSecret"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure client secret. Password of the Client secret, found in the app's Certificates & secrets page. Go to Azure Active Directory > App registrations and select the app. Then select Certificates & secrets to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"accountName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Storage account name. Name of the storage account that holds the container where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"containerName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Name of the container in the Storage account. This is where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","nullable":true,"description":"Optional virtual sub-folder specifiying a path within the container. Logs will be archived under the path “{container-name}/{virtual sub-folder}”. Avoid leading and trailing slashes (/). For example, the prefix “region1” is good, but “/region1/” is not."}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs><TabItem label={"default"} value={"default"}><div>

successful operation

</div><div></div></TabItem></ApiTabs></div></div>
