---
id: create-settings
title: "Set up archiving"
description: "Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html)."
sidebar_label: "Set up archiving"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/logz/logz-io-api
custom_edit_url: null
hide_send_button: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Set up archiving</h1>

<MethodEndpoint method={"post"} path={"/v2/archive/settings"}></MethodEndpoint>



Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html). <br /> 
*Please ensure to change the region in the URL to match your account's region.*


## Request

<MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"storageType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`S3`, `BLOB`]"} schema={{"type":"string","enum":["S3","BLOB"],"description":"Specifies the storage provider. If `S3`, the   `amazonS3StorageSettings` are relevant. If `BLOB`, the `azureBlobStorageSettings` are relevant.","example":"S3"}}></SchemaItem><SchemaItem collapsible={false} name={"enabled"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, archiving is currently enabled.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={false} name={"compressed"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, logs are compressed before they are archived.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>amazonS3StorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `S3`.

</div><SchemaItem collapsible={false} name={"credentialsType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`IAM`, `KEYS`]"} schema={{"description":"Specifies which credentials will be used for authentication. The options are either `KEYS` with `s3SecretCredentials`, or `IAM` with `s3IamCredentials`.","type":"string","enum":["IAM","KEYS"]}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Specify a path to the **root** of the S3 bucket. (Currently, archiving to a sub-bucket is supported, but not restoring from one.)\n**Unique buckets** - It is important to archive each account/sub-account to a separate S3 bucket."}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3SecretCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Authentication with S3 Secret Credentials is supported for backward compatibility. IAM roles are strongly recommended.

</div><SchemaItem collapsible={false} name={"accessKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"secretKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3IamCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"arn"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Amazon Resource Name (ARN) to uniquely identify the S3 bucket."}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>azureBlobStorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `Blob`.

</div><SchemaItem collapsible={false} name={"tenantId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Directory (tenant) ID. The Tenant ID of the AD app. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure application (client) ID. The Client ID of the AD app, found under the App Overview page. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientSecret"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure client secret. Password of the Client secret, found in the app's Certificates & secrets page. Go to Azure Active Directory > App registrations and select the app. Then select Certificates & secrets to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"accountName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Storage account name. Name of the storage account that holds the container where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"containerName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Name of the container in the Storage account. This is where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","nullable":true,"description":"Optional virtual sub-folder specifiying a path within the container. Logs will be archived under the path “{container-name}/{virtual sub-folder}”. Avoid leading and trailing slashes (/). For example, the prefix “region1” is good, but “/region1/” is not."}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs><TabItem label={"default"} value={"default"}><div>

successful operation

</div><div></div></TabItem></ApiTabs></div></div>
