---
id: create-settings
title: "Set up archiving"
description: "Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html)."
sidebar_label: "Set up archiving"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/logz/logz-io-api
custom_edit_url: null
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Set up archiving</h1>

<MethodEndpoint method={"post"} path={"/v2/archive/settings"}></MethodEndpoint>



Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html).

## Request

<MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"storageType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`S3`, `BLOB`]"} schema={{"type":"string","enum":["S3","BLOB"],"description":"Specifies the storage provider. If `S3`, the   `amazonS3StorageSettings` are relevant. If `BLOB`, the `azureBlobStorageSettings` are relevant.","example":"S3"}}></SchemaItem><SchemaItem collapsible={false} name={"enabled"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, archiving is currently enabled.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={false} name={"compressed"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, logs are compressed before they are archived.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>amazonS3StorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `S3`.

</div><SchemaItem collapsible={false} name={"credentialsType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`IAM`, `KEYS`]"} schema={{"description":"Specifies which credentials will be used for authentication. The options are either `KEYS` with `s3SecretCredentials`, or `IAM` with `s3IamCredentials`.","type":"string","enum":["IAM","KEYS"]}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Specify a path to the **root** of the S3 bucket. (Currently, archiving to a sub-bucket is supported, but not restoring from one.)\n**Unique buckets** - It is important to archive each account/sub-account to a separate S3 bucket."}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3SecretCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Authentication with S3 Secret Credentials is supported for backward compatibility. IAM roles are strongly recommended.

</div><SchemaItem collapsible={false} name={"accessKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"secretKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3IamCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"arn"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Amazon Resource Name (ARN) to uniquely identify the S3 bucket."}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>azureBlobStorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `Blob`.

</div><SchemaItem collapsible={false} name={"tenantId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Directory (tenant) ID. The Tenant ID of the AD app. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure application (client) ID. The Client ID of the AD app, found under the App Overview page. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientSecret"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure client secret. Password of the Client secret, found in the app's Certificates & secrets page. Go to Azure Active Directory > App registrations and select the app. Then select Certificates & secrets to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"accountName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Storage account name. Name of the storage account that holds the container where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"containerName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Name of the container in the Storage account. This is where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","nullable":true,"description":"Optional virtual sub-folder specifiying a path within the container. Logs will be archived under the path “{container-name}/{virtual sub-folder}”. Avoid leading and trailing slashes (/). For example, the prefix “region1” is good, but “/region1/” is not."}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs><TabItem label={"default"} value={"default"}><div>

successful operation

</div><div></div></TabItem></ApiTabs></div></div>
      