---
id: create-settings
title: "Set up archiving"
description: "Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html)."
sidebar_label: "Set up archiving"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/logz/logz-io-api
custom_edit_url: null
hide_send_button: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Set up archiving</h1>

<MethodEndpoint method={"post"} path={"/v2/archive/settings"}></MethodEndpoint>



Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html). 
Please ensure to change the region in the URL to match your account's region.


## Request

<MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"storageType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`S3`, `BLOB`]"} schema={{"type":"string","enum":["S3","BLOB"],"description":"Specifies the storage provider. If `S3`, the   `amazonS3StorageSettings` are relevant. If `BLOB`, the `azureBlobStorageSettings` are relevant.","example":"S3"}}></SchemaItem><SchemaItem collapsible={false} name={"enabled"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, archiving is currently enabled.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={false} name={"compressed"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, logs are compressed before they are archived.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>amazonS3StorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `S3`.

</div><SchemaItem collapsible={false} name={"credentialsType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`IAM`, `KEYS`]"} schema={{"description":"Specifies which credentials will be used for authentication. The options are either `KEYS` with `s3SecretCredentials`, or `IAM` with `s3IamCredentials`.","type":"string","enum":["IAM","KEYS"]}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Specify a path to the **root** of the S3 bucket. (Currently, archiving to a sub-bucket is supported, but not restoring from one.)\n**Unique buckets** - It is important to archive each account/sub-account to a separate S3 bucket."}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3SecretCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Authentication with S3 Secret Credentials is supported for backward compatibility. IAM roles are strongly recommended.

</div><SchemaItem collapsible={false} name={"accessKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"secretKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3IamCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"arn"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Amazon Resource Name (ARN) to uniquely identify the S3 bucket."}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>azureBlobStorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `Blob`.

</div><SchemaItem collapsible={false} name={"tenantId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Directory (tenant) ID. The Tenant ID of the AD app. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure application (client) ID. The Client ID of the AD app, found under the App Overview page. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientSecret"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure client secret. Password of the Client secret, found in the app's Certificates & secrets page. Go to Azure Active Directory > App registrations and select the app. Then select Certificates & secrets to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"accountName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Storage account name. Name of the storage account that holds the container where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"containerName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Name of the container in the Storage account. This is where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","nullable":true,"description":"Optional virtual sub-folder specifiying a path within the container. Logs will be archived under the path “{container-name}/{virtual sub-folder}”. Avoid leading and trailing slashes (/). For example, the prefix “region1” is good, but “/region1/” is not."}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs><TabItem label={"default"} value={"default"}><div>

successful operation

</div><div></div></TabItem></ApiTabs></div></div>
