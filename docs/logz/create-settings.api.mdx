---
id: create-settings
title: "Set up archiving"
description: "Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html)."
sidebar_label: "Set up archiving"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/logz/logz-io-api
custom_edit_url: null
hide_send_button: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Set up archiving</h1>

<MethodEndpoint method={"post"} path={"/v2/archive/settings"}></MethodEndpoint>



Configure archiving for a time-based log account. One archive can be configured per account (or sub account). For more on this, see [AWS Access with IAM](https://docs.logz.io/user-guide/give-aws-access-with-iam-roles/) and [Archiving](https://docs.logz.io/user-guide/archive-and-restore/configure-archiving.html).

## Request

<MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"storageType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`S3`, `BLOB`]"} schema={{"type":"string","enum":["S3","BLOB"],"description":"Specifies the storage provider. If `S3`, the   `amazonS3StorageSettings` are relevant. If `BLOB`, the `azureBlobStorageSettings` are relevant.","example":"S3"}}></SchemaItem><SchemaItem collapsible={false} name={"enabled"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, archiving is currently enabled.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={false} name={"compressed"} required={false} schemaName={"boolean"} qualifierMessage={undefined} schema={{"type":"boolean","description":"If `true`, logs are compressed before they are archived.","default":true,"example":true}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>amazonS3StorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `S3`.

</div><SchemaItem collapsible={false} name={"credentialsType"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** [`IAM`, `KEYS`]"} schema={{"description":"Specifies which credentials will be used for authentication. The options are either `KEYS` with `s3SecretCredentials`, or `IAM` with `s3IamCredentials`.","type":"string","enum":["IAM","KEYS"]}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Specify a path to the **root** of the S3 bucket. (Currently, archiving to a sub-bucket is supported, but not restoring from one.)\n**Unique buckets** - It is important to archive each account/sub-account to a separate S3 bucket."}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3SecretCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Authentication with S3 Secret Credentials is supported for backward compatibility. IAM roles are strongly recommended.

</div><SchemaItem collapsible={false} name={"accessKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"secretKey"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>s3IamCredentials</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"arn"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Amazon Resource Name (ARN) to uniquely identify the S3 bucket."}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>azureBlobStorageSettings</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

Applicable settings when the `storageType` is `Blob`.

</div><SchemaItem collapsible={false} name={"tenantId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Directory (tenant) ID. The Tenant ID of the AD app. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure application (client) ID. The Client ID of the AD app, found under the App Overview page. Go to Azure Active Directory > App registrations and select the app to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"clientSecret"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure client secret. Password of the Client secret, found in the app's Certificates & secrets page. Go to Azure Active Directory > App registrations and select the app. Then select Certificates & secrets to see it."}}></SchemaItem><SchemaItem collapsible={false} name={"accountName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Azure Storage account name. Name of the storage account that holds the container where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"containerName"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Name of the container in the Storage account. This is where the logs will be archived."}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","nullable":true,"description":"Optional virtual sub-folder specifiying a path within the container. Logs will be archived under the path “{container-name}/{virtual sub-folder}”. Avoid leading and trailing slashes (/). For example, the prefix “region1” is good, but “/region1/” is not."}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs><TabItem label={"default"} value={"default"}><div>

successful operation

</div><div></div></TabItem></ApiTabs></div></div>
